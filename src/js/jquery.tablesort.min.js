/*
	A simple, lightweight jQuery plugin for creating sortable tables.
	https://github.com/kylefox/jquery-tablesort
	Version 0.0.2 (fork branch)
*/
$(function(){var a=window.jQuery;a.tablesort=function(b,c){var d=this;this.$table=b,this.$thead=this.$table.find("thead"),this.settings=a.extend({},a.tablesort.defaults,c),this.$sortCells=this.$thead.length>0?this.$thead.find("th"):this.$table.find("th"),this.$sortCells.bind("click.tablesort",function(){d.sort(a(this))}),this.index=null,this.$th=null,this.direction=null},a.tablesort.prototype={sort:function(b,c){var d=new Date,e=this,f=this.$table,g=this.$thead.length>0?f.find("tbody tr"):f.find("tr").has("td"),h=f.find("tr td:nth-of-type("+(b.index()+1)+")"),i=b.data().sortBy,j=[],k=h.map(function(c,d){return i?"function"==typeof i?i(a(b),a(d),e):i:null!=a(this).data().sortValue?a(this).data().sortValue:a(this).text()});if(0!==k.length){e.$sortCells.removeClass(e.settings.asc+" "+e.settings.desc),this.direction="asc"!==c&&"desc"!==c?"asc"===this.direction?"desc":"asc":c,c="asc"==this.direction?1:-1,e.$table.trigger("tablesort:start",[e]),e.log("Sorting by "+this.index+" "+this.direction);for(var l=0,m=k.length;m>l;l++)j.push({index:l,cell:h[l],row:g[l],value:k[l]});j.sort(function(a,b){return a.value>b.value?1*c:a.value<b.value?-1*c:0}),a.each(j,function(a,b){f.append(b.row)}),b.addClass(e.settings[e.direction]),e.log("Sort finished in "+((new Date).getTime()-d.getTime())+"ms"),e.$table.trigger("tablesort:complete",[e])}},log:function(b){(a.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+b)},destroy:function(){return this.$sortCells.unbind("click.tablesort"),this.$table.data("tablesort",null),null}},a.tablesort.DEBUG=!1,a.tablesort.defaults={debug:a.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending"},a.fn.tablesort=function(b){var c,e;return this.each(function(){c=a(this),e=c.data("tablesort"),e&&e.destroy(),c.data("tablesort",new a.tablesort(c,b))})}});
